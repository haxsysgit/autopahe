AutoPahe Upgrade Plan

Phase 1 — Codebase Restructure (Clean Architecture) [COMPLETED]
- [X] Extract UI banners to ap_core/banners.py (Banners, n)
- [X] Extract browser handling to ap_core/browser.py (make_firefox_driver, browser, driver_output, cleanup)
- [X] Centralize HTTP session and caching in ap_core/browser.py for now (get_request_session, cached_request)
- [X] Update auto_pahe.py imports to use ap_core modules
- [X] Keep behavior identical (no functional changes)
- [X] Extract parser to ap_core/parser.py (parse_mailfunction_api)

Phase 2 — Feature Enhancements [COMPLETED]
- [X] Quality selection toggle (480p/720p/1080p) with auto-fallback (reverted per user request; kept original behavior)
- [X] Resume downloads: continue partial files if interrupted (kwikdown already uses Range headers)
- [X] Sorting integration (pahesort): --sort, --sort-path, --sort-dry-run, auto-sort via config
- [X] Robust records management: -R with subcommands (view/search/delete/progress/rate/rename/set-keyword/list-status/export/import)
- [X] Enhanced execution tracker: 'all' and 'from X to Y' date ranges
- [X] Summary command: --summary (execution stats + records summary)
- [X] Config file (.ini) for defaults (browser, resolution, workers, download_dir, sort options)
- [ ] Batch/Season selection helpers (e.g., --season 1, or range presets) [PENDING]
- [ ] Fuzzy search and filters (year, status) for lookup [PENDING]
- [ ] Notifications (desktop) when downloads complete [PENDING]

Phase 3 — Performance Improvements
- [ ] Optional parallel download toggle with safe staggering (already present; expose via CLI)
- [ ] Reuse a single Firefox instance for multiple episode page fetches (pooling) [careful with stability]
- [ ] Persistent cookies jar to reduce DDoS-Guard friction between runs
- [ ] Cache search and release API responses on disk
- [ ] Adaptive waits based on first page timings (learned timings)

Phase 4 — DX & UX
- [ ] CLI prompts: skip interactive mode when args provided (already)
- [ ] Progress bars for multi-download queue
- [ ] Rich logging levels: --verbose / --quiet
- [ ] Better error messages for no links / captchas

Notes
- Preserve the working DDoS-Guard bypass (refresh + implicitly_wait).
- Avoid over-optimizing Firefox prefs that break site JS.
- Keep defaults stable (sequential downloads) and allow opt-in speed.
