Metadata-Version: 2.4
Name: autopahe
Version: 3.0.0
Summary: Cross-platform anime downloader for AnimePahe with advanced features: smart caching, notifications, filters, batch downloads, and record management
Author-email: haxsys <haxsysgit@users.noreply.github.com>
License: MIT License
        
        Copyright (c) [2023] [Arinze]
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
        
Project-URL: Homepage, https://github.com/haxsysgit/autopahe
Project-URL: Repository, https://github.com/haxsysgit/autopahe
Project-URL: Issues, https://github.com/haxsysgit/autopahe/issues
Keywords: anime,downloader,animepahe,automation,cli
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Intended Audience :: End Users/Desktop
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Multimedia :: Video
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: beautifulsoup4>=4.12.0
Requires-Dist: lxml>=5.0.0
Requires-Dist: requests>=2.31.0
Requires-Dist: playwright>=1.45.0
Requires-Dist: tqdm>=4.66.0
Requires-Dist: colorama>=0.4.6


<!-- Badges -->
[![PyPI version](https://badge.fury.io/py/autopahe.svg)](https://pypi.org/project/autopahe/)
[![contributions welcome](https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat)](https://github.com/haxsysgit/autopahe/)
[![License](https://img.shields.io/github/license/haxsysgit/autopahe?color=brightgreen)](https://github.com/haxsysgit/autopahe/blob/main/license.md)
[![OpenIssues](https://img.shields.io/github/issues/haxsysgit/autopahe?color=important)](https://github.com/haxsysgit/autopahe/issues)
<!--LineBreak-->
[![Windows](https://img.shields.io/badge/Windows-white?style=flat-square&logo=windows&logoColor=blue)](https://github.com/haxsysgit/autopahe/)
[![macOS](https://img.shields.io/badge/macOS-white?style=flat-square&logo=apple&logoColor=black)](https://github.com/haxsysgit/autopahe/)
[![Linux](https://img.shields.io/badge/Linux-white?style=flat-square&logo=linux&logoColor=black)](https://github.com/haxsysgit/autopahe/)
<!-- Badges -->

# AutoPahe

> **A powerful, cross-platform anime downloader for [AnimePahe](https://animepahe.com/) with advanced features**

Automatic anime search, download, and management with support for parallel downloads, desktop notifications, smart caching, filtering, and comprehensive record tracking. Fully cross-platform (Windows, macOS, Linux).

## ‚ú® Key Features

- üîç **Smart Search** with year and status filters
- üì¶ **Batch/Season Downloads** - Download entire seasons with one command
- üöÄ **Parallel Downloads** - Speed up with multi-threaded downloads
- üîî **Desktop Notifications** - Get notified when downloads complete (Windows/macOS/Linux)
- üíæ **Smart Caching** - Faster repeat searches with automatic API caching
- üìä **Progress Tracking** - Visual progress bars for multi-episode downloads
- üóÇÔ∏è **Record Management** - Track watching progress, ratings, and status
- ‚öôÔ∏è **Configuration System** - Save your preferences in a config file
- üéØ **Auto-Sorting** - Automatically organize downloaded files
- üåê **Cross-Platform** - Works on Windows, macOS, and Linux
- üìù **Detailed Logging** - Verbose and quiet modes available
- üç™ **Session Persistence** - Reduced DDoS-Guard friction with cookie caching

## üìã Requirements

### System Requirements
- **Python 3.8+**
- **Web Browser**: Firefox or Chrome/Chromium
- **WebDriver**: geckodriver (Firefox) or chromedriver (Chrome)

### Python Dependencies
```bash
pip install selenium beautifulsoup4 requests tqdm lxml
```

### WebDriver Installation

**Linux (Ubuntu/Debian):**
```bash
# Firefox (geckodriver)
sudo apt install firefox-geckodriver

# Chrome (chromedriver)
sudo apt install chromium-chromedriver
```

**macOS (Homebrew):**
```bash
# Firefox
brew install geckodriver

# Chrome
brew install chromedriver
```

**Windows:**
- Download [geckodriver](https://github.com/mozilla/geckodriver/releases) or [chromedriver](https://chromedriver.chromium.org/downloads)
- Add to PATH or place in project directory

## üöÄ Quick Start

### Installation

1. **Clone the repository:**
```bash
git clone https://github.com/haxsysgit/autopahe.git
cd autopahe
```

2. **Install dependencies:**
```bash
pip install -r requirements.txt
```

3. **Install WebDriver** (see requirements above)

4. **Run the script:**
```bash
python3 auto_pahe.py --help
```

### First Use Example
```bash
# Search for an anime
python3 auto_pahe.py -s "Naruto"

# Select and download episode 1
python3 auto_pahe.py -s "Naruto" -i 0 -d 1

# Download multiple episodes
python3 auto_pahe.py -s "Naruto" -i 0 -md "1-5"
```

## üìñ Usage

### Basic Commands

```bash
# Search for anime
python3 auto_pahe.py -s "Anime Name"

# Search with filters
python3 auto_pahe.py -s "Naruto" --year 2007 --status "Finished"

# Select anime from results (index 0 = first result)
python3 auto_pahe.py -s "Naruto" -i 0

# Download single episode
python3 auto_pahe.py -s "Naruto" -i 0 -d 1

# Download multiple episodes
python3 auto_pahe.py -s "Naruto" -i 0 -md "1-5"
python3 auto_pahe.py -s "Naruto" -i 0 -md "1,3,5-8,10"

# Download entire season (12-13 episodes)
python3 auto_pahe.py -s "Naruto" -i 0 --season 1

# Parallel downloads (use with caution)
python3 auto_pahe.py -s "Naruto" -i 0 -md "1-10" -w 2

# With desktop notifications
python3 auto_pahe.py -s "Naruto" -i 0 -md "1-5" --notify
```

### Advanced Features

#### üìä Records Management
```bash
# View all records
python3 auto_pahe.py -R view

# Search records
python3 auto_pahe.py -R search "naruto"

# Update progress
python3 auto_pahe.py -R progress "Naruto" 27

# Rate anime
python3 auto_pahe.py -R rate "Naruto" 9.5

# Export records
python3 auto_pahe.py -R export backup.json json
python3 auto_pahe.py -R export records.csv csv

# Import records
python3 auto_pahe.py -R import backup.json

# Delete record
python3 auto_pahe.py -R delete "Naruto"

# List by status
python3 auto_pahe.py -R list-status completed
```

#### üóÇÔ∏è File Sorting
```bash
# Sort downloaded files
python3 auto_pahe.py --sort all --sort-path ~/Downloads

# Dry run (preview changes)
python3 auto_pahe.py --sort all --sort-dry-run

# Rename only
python3 auto_pahe.py --sort rename

# Organize into folders
python3 auto_pahe.py --sort organize
```

#### üíæ Cache Management
```bash
# View cache statistics
python3 auto_pahe.py --cache stats

# Clear cache and cookies
python3 auto_pahe.py --cache clear
```

#### üìà Execution Statistics
```bash
# Today's stats
python3 auto_pahe.py -dt "today"

# This week
python3 auto_pahe.py --summary "this week"

# All time
python3 auto_pahe.py --summary "all"

# Date range
python3 auto_pahe.py --summary "from 2025-11-01 to 2025-11-30"
```

## üí° Example Workflows

### Basic Workflow
```bash
# 1. Search
python3 auto_pahe.py -s "One Piece"

# 2. Select (index 0 = first result)
python3 auto_pahe.py -s "One Piece" -i 0

# 3. Download episode 1
python3 auto_pahe.py -s "One Piece" -i 0 -d 1
```

### Advanced Workflow
```bash
# Search with filters
python3 auto_pahe.py -s "Naruto" --year 2007 --status "Finished Airing"

# Download season 1 with notifications and parallel downloads
python3 auto_pahe.py -s "Naruto" -i 0 --season 1 -w 2 --notify

# Auto-sort after download (if configured)
# Files automatically organized into folders
```

### Record Management Workflow
```bash
# After downloading, update your records
python3 auto_pahe.py -R progress "Naruto" 12
python3 auto_pahe.py -R rate "Naruto" 9.0

# Check what you're watching
python3 auto_pahe.py -R list-status "watching"

# Export for backup
python3 auto_pahe.py -R export ~/anime_backup.json json
```

## üéØ Complete Command Reference

### Search & Download
| Flag | Description |
|------|-------------|
| `-s, --search TEXT` | Search for anime by name |
| `-i, --index INT` | Select anime from search results |
| `-d, --single_download INT` | Download single episode |
| `-md, --multi_download TEXT` | Download multiple episodes (e.g., "1-5,7,10-12") |
| `-l, --link` | Display download link (no download) |
| `-ml, --multilinks` | Display multiple download links |
| `-a, --about` | Show anime overview |

### Options
| Flag | Description |
|------|-------------|
| `-b, --browser TEXT` | Browser choice (firefox\|chrome) |
| `-p, --resolution TEXT` | Preferred resolution (480\|720\|1080) |
| `-w, --workers INT` | Parallel workers for downloads (default: 1) |

### üîç Search Filters (NEW)
| Flag | Description |
|------|-------------|
| `--year INT` | Filter search results by release year |
| `--status TEXT` | Filter search results by status |

### üì¶ Batch Downloads (NEW)
| Flag | Description |
|------|-------------|
| `--season INT` | Download entire season (e.g., --season 1 = eps 1-12) |

### üîî Notifications (NEW)
| Flag | Description |
|------|-------------|
| `--notify` | Enable desktop notifications on completion |

### üìä Records Management
| Flag | Description |
|------|-------------|
| `-r, --record TEXT` | Basic record access (view, index, keyword) |
| `-R, --records ...` | Advanced management (see subcommands below) |

**-R Subcommands:**
- `view` - List all records
- `search <query>` - Search records
- `delete <id\|title>` - Delete record
- `progress <id\|title> <episode>` - Update progress
- `rate <id\|title> <0-10>` - Set rating
- `rename <id\|title> <new_title>` - Rename
- `set-keyword <id\|title> <keyword>` - Update keyword
- `list-status <status>` - Filter by status
- `export <path> [json\|csv]` - Export records
- `import <path>` - Import records

### üóÇÔ∏è File Sorting
| Flag | Description |
|------|-------------|
| `--sort {all\|rename\|organize}` | Sort downloaded files |
| `--sort-path PATH` | Directory to sort (default: Downloads) |
| `--sort-dry-run` | Preview changes without applying |

### üíæ Cache Management (NEW)
| Flag | Description |
|------|-------------|
| `--cache {clear\|stats}` | Manage disk cache and cookies |

### üìà Statistics
| Flag | Description |
|------|-------------|
| `-dt, --execution_data TEXT` | Execution stats for periods |
| `--summary TEXT` | Stats + records summary |

### üìù Logging (NEW)
| Flag | Description |
|------|-------------|
| `--verbose` | Enable DEBUG logging (detailed) |
| `--quiet` | Enable WARNING logging (minimal) |

### ‚öôÔ∏è Configuration
| Flag | Description |
|------|-------------|
| `--config PATH` | Load configuration from file |
| `--write-config [PATH]` | Generate sample config file |

## ‚öôÔ∏è Configuration

Create a config file to save your preferences:

```bash
# Generate sample config
python3 auto_pahe.py --write-config

# Edit ~/.config/autopahe/config.ini
```

**Sample Configuration:**
```ini
[defaults]
# Browser: firefox or chrome
browser = firefox

# Resolution: 480, 720, 1080
resolution = 1080

# Workers for parallel downloads (1 = sequential)
workers = 2

# Custom download directory (optional)
download_dir = /home/user/Videos/Anime

# Auto-sort after downloads
sort_on_complete = true
sort_mode = all

# Custom sort directory (optional)
sort_path = 
```

Config is loaded automatically from:
1. `~/.config/autopahe/config.ini`
2. `~/.autopahe.ini`
3. `./autopahe.ini`

Or specify custom location: `--config /path/to/config.ini`

## üöÄ Performance Features

### Smart Caching
- **API Response Caching**: 6-hour cache for faster repeat searches
- **Cookie Persistence**: 24-hour session cookies reduce DDoS-Guard challenges
- **Auto-cleanup**: Old cache entries removed automatically

### Parallel Downloads
- Download multiple episodes simultaneously with `-w/--workers`
- Safe staggering prevents port conflicts
- **Warning**: May trigger DDoS-Guard protection. Use `-w 1` for stability.

### Progress Tracking
- Visual progress bars for multi-episode downloads (requires `tqdm`)
- Real-time completion status
- Failed episode tracking

## üîî Desktop Notifications

Get notified when downloads complete or fail:

**Linux:** Uses `notify-send` (libnotify)
```bash
sudo apt install libnotify-bin  # Ubuntu/Debian
```

**macOS:** Uses AppleScript (built-in)

**Windows:** Uses PowerShell toast notifications (built-in)

Enable with `--notify` flag.

## üóÇÔ∏è File Organization

### Automatic Sorting
Integrates `pahesort` functionality:
- **Rename**: Clean up AnimePahe filenames
- **Organize**: Group episodes into anime folders
- **Auto-sort**: Enable in config for automatic organization

### Manual Sorting
```bash
# Preview changes
python3 auto_pahe.py --sort all --sort-dry-run

# Apply sorting
python3 auto_pahe.py --sort all --sort-path ~/Downloads
```

## üìù Logging

Control output verbosity:

```bash
# Normal logging (INFO)
python3 auto_pahe.py -s "Naruto" -i 0 -d 1

# Verbose logging (DEBUG) - shows cache hits, API calls, etc.
python3 auto_pahe.py -s "Naruto" -i 0 -d 1 --verbose

# Quiet logging (WARNING) - errors only
python3 auto_pahe.py -s "Naruto" -i 0 -d 1 --quiet
```

Logs saved to `autopahe.log` in current directory.

## üåê Cross-Platform Support

### Windows
- ‚úÖ Full support with Firefox or Chrome
- ‚úÖ Desktop notifications via PowerShell
- ‚úÖ Automatic driver detection
- üìù Install drivers to PATH or project directory

### macOS  
- ‚úÖ Full support with Firefox or Chrome
- ‚úÖ Desktop notifications via AppleScript
- ‚úÖ Homebrew driver installation
- üìù Use `brew install geckodriver` or `chromedriver`

### Linux
- ‚úÖ Full support on all distros
- ‚úÖ Desktop notifications via notify-send
- ‚úÖ Package manager driver installation
- üìù Tested on Ubuntu, Debian, Fedora, Arch

## üìö Documentation

Detailed documentation in the repository:

- **ALL_PHASES_DOCUMENTATION.txt** - Complete feature guide
- **CONFIG_DOCUMENTATION.txt** - Configuration system details  
- **TESTING_GUIDE.txt** - Comprehensive testing procedures
- **PHASE2_CHANGES_SUMMARY.txt** - Implementation changelog

## ‚ö†Ô∏è Important Notes

### DDoS-Guard Protection
- AnimePahe uses DDoS-Guard protection
- Script includes bypass mechanism (refresh + implicit wait)
- **Parallel downloads** may trigger protection - use cautiously
- **Persistent cookies** help reduce challenges
- If blocked, wait a few minutes and try again

### Download Quality
- Default: 720p (configurable)
- Available: 480p, 720p, 1080p
- Script selects best available quality if preferred not available

### Resume Support
- Partial downloads automatically resumed
- Uses HTTP Range headers
- Safe to interrupt and restart

## ü§ù Contributing

Contributions welcome! Please:
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## ‚öñÔ∏è License

See [license.md](license.md) for details.

## üôè Credits

Created by [haxsys](https://github.com/haxsysgit)

Built with:
- [AnimePahe](https://animepahe.com/) - Anime source
- [Selenium](https://www.selenium.dev/) - Browser automation
- [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/) - HTML parsing
- [Requests](https://requests.readthedocs.io/) - HTTP library


## üìû Support

- **Issues**: [GitHub Issues](https://github.com/haxsysgit/autopahe/issues)
- **Questions**: Open a discussion or issue
- **Updates**: Watch the repository for new releases

---

**Enjoy AutoPahe! üé¨**
